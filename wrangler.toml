name = "sintlucasmasters"
main = "src/index.tsx"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

[version_metadata]
binding = "CF_VERSION_METADATA"

# Static assets from the static folder
[assets]
directory = "./static"
binding = "ASSETS"

[[d1_databases]]
binding = "DB"
database_name = "sintlucasmasters"
database_id = "4227d715-382f-416a-aa9c-c5da32847400"
migrations_dir = "migrations"
migrations_table = "d1_migrations"

# Environment variables (secrets set via `wrangler secret put`)
# JWT_SECRET - Secret for signing JWT tokens
# AWS_ACCESS_KEY_ID - AWS IAM access key for SES
# AWS_SECRET_ACCESS_KEY - AWS IAM secret key for SES
# AWS_REGION - AWS region for SES (e.g., eu-west-1)
# CLOUDFLARE_ACCOUNT_ID - Cloudflare account ID for Images API
# CLOUDFLARE_API_TOKEN - Cloudflare API token with Images permissions

[vars]
APP_BASE_URL = "https://dev.sintlucasmasters.com"
SES_CONFIGURATION_SET = "sintlucasmasters-events"
SENTRY_DSN = "https://940c808bee865bc2ba2d24da4101ef17@o4510688180568064.ingest.de.sentry.io/4510832618831952"
SENTRY_HOST = "o4510688180568064.ingest.de.sentry.io"
SENTRY_PROJECT_ID = "4510832618831952"

# Production overrides
[env.production.vars]
APP_BASE_URL = "https://sintlucasmasters.com"
SES_CONFIGURATION_SET = "sintlucasmasters-events"
SENTRY_DSN = "https://940c808bee865bc2ba2d24da4101ef17@o4510688180568064.ingest.de.sentry.io/4510832618831952"
SENTRY_HOST = "o4510688180568064.ingest.de.sentry.io"
SENTRY_PROJECT_ID = "4510832618831952"

[[r2_buckets]]
binding = "FILES"
bucket_name = "sintlucasmasters"

# Cron trigger for cleaning up expired auth tokens
[triggers]
crons = ["0 0 * * *"]

[observability]
[observability.logs]
enabled = false
invocation_logs = true
